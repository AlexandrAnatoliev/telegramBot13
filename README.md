# telegramBot12

#### –ë–æ—Ç –Ω–∞ aiogram. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ on_startup, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ parse_mode="HTML", –æ—Ç–ø—Ä–∞–≤–∫–∞ emoji –∏ stickers

* –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è on_startup
* –ü–æ –∫–æ–º–∞–Ω–¥–µ /start –±–æ—Ç –ø–∏—à–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∂–∏—Ä–Ω—ã–º –∫—É—Ä—Å–∏–≤–æ–º
* –ü–æ –∫–æ–º–∞–Ω–¥–µ /give –±–æ—Ç –ø–æ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å—Ç–∏–∫–µ—Ä –≤ —á–∞—Ç, —É–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ–≥–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ–º, –¥–æ–±–∞–≤–ª—è—è –∫ –Ω–µ–º—É emoji ü§™. –ù–∞ '‚ù§Ô∏è' –æ—Ç–≤–µ—á–∞–µ—Ç 'üñ§'
* –ë–æ—Ç –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ‚úÖ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
* –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ID —Å—Ç–∏–∫–µ—Ä–∞ –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

–í–∑—è—Ç https://www.youtube.com/watch?v=lbLzGfshtaY&list=PLe-iIMbo5JOJm6DRTjhleHojroS-Bbocr&index=6

## –ó–∞–º–µ—á–∞–Ω–∏—è:

* –ü–∞—Ä–∞–º–µ—Ç—Ä parse_mode="HTML" –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Ç–æ–¥ —á—Ç–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ - –∫–∞–∫ HTML-—Å–æ–æ–±—â–µ–Ω–∏–µ

```python
# <em> –∫—É—Ä—Å–∏–≤ </em> <b> –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç </b>
```

* –í executor.start_polling(dp, on_startup=on_startup), –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç on_startup=on_startup, —á—Ç–æ–±—ã —Ñ—É–Ω–∫—Ü–∏—è
  on_startup(_) –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –±–æ—Ç–∞

```python
# –§—É–Ω–∫—Ü–∏—è on_startup(_) –ø—Ä–∏–Ω–∏–º–∞–µ—Ç '_' –∞—Ä–≥—É–º–µ–Ω—Ç!
```

* sticker_id –±–µ—Ä–µ–º —É –±–æ—Ç–∞ "get sticker id" (@idstickerbot). Emoji ü§™ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º –∏–∑ —Ç–µ–ª–µ–≥—Ä–∞–º–º
* @dp.message_handler(content_types=['sticker']) —Ç–∏–ø –≤—Ö–æ–¥—è—â–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ —Ö–µ–Ω–¥–ª–µ—Ä - —Å—Ç–∏–∫–µ—Ä
* await message.answer(message.sticker.file_id)  –ø–æ—Å—ã–ª–∞–µ–º id —Å—Ç–∏–∫–µ—Ä–∞

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

* $ pip install -r requirements.txt
* —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª config.py, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç—É –≤ –≤–∏–¥–µ

```python 
TOKEN_API = "1234567890:ASDFGHH..."
```

## –ì–¥–µ –≤–∑—è—Ç—å token?

* https://xakep.ru/2021/11/28/python-telegram-bots/

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ü–†–ê–ö–¢–ò–ö–ê:

* –†–µ–∞–ª–∏–∑—É–π—Ç–µ –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç–∏–∫–µ—Ä —Å –∫–æ—Ç–∏–∫–æ–º –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É /give. –ù–æ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å—Ç–∏–∫–µ—Ä–∞
  –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–º–æ—Ç—Ä–∏ –∫–∞–∫–æ–π —Å–º–µ—à–Ω–æ–π –∫–æ—Ç ‚ù§Ô∏è"
* –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞, –¥–æ–±–∞–≤–∏–≤ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–±—ã—á–Ω–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ, –∞ –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —á–µ—Ä–Ω–æ–µ.
* –†–µ–∞–ª–∏–∑—É–π—Ç–µ –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ‚úÖ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ.
* –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é /help, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–∞–Ω–¥, –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç —Ç.–æ, —á—Ç–æ–±—ã –∏–º–µ–Ω–∞
  –∫–æ–º–∞–Ω–¥ –±—ã–ª–∏ –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º, –∞ –æ–ø–∏—Å–∞–Ω–∏–µ - –∫—É—Ä—Å–∏–≤–æ–º.
* –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é on_startup(), –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª "–Ø –∑–∞–ø—É—Å—Ç–∏–ª—Å—è!"
* –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å ID —Å—Ç–∏–∫–µ—Ä–∞ –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

#### –î–æ–±–∞–≤–ª—è–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
from aiogram import Bot, Dispatcher, executor, types
from config import TOKEN_API
```

#### –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ Bot

```python
bot = Bot(TOKEN_API)
```

#### –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ Dispatcher

```python
dp = Dispatcher(bot)
```

#### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```python
if __name__ == "__main__":
    executor.start_polling(dp, on_startup=on_startup)
    # –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç on_startup=on_startup, —á—Ç–æ–±—ã —Ñ—É–Ω–∫—Ü–∏—è on_startup(_) –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –±–æ—Ç–∞
```

#### –§—É–Ω–∫—Ü–∏—è on_startup(_) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –±–æ—Ç–∞

```python
async def on_startup(_):  # —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç (_) –∞—Ä–≥—É–º–µ–Ω—Ç!
    print("–Ø –∑–∞–ø—É—Å—Ç–∏–ª—Å—è!")
```

#### –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã /start, /help. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç HTML-—Ä–∞–∑–º–µ—Ç–∫—É

```python
@dp.message_handler(commands=['start'])
async def start_command(message: types.Message):
    await message.answer("<em>–î–æ–±—Ä–æ <b>–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</b> –≤ –Ω–∞—à –±–æ—Ç</em>", parse_mode="HTML")
    # –ø–∞—Ä–∞–º–µ—Ç—Ä parse_mode="HTML" –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Ç–æ–¥ —á—Ç–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ - –∫–∞–∫ HTML-—Å–æ–æ–±—â–µ–Ω–∏–µ
    # <em> –∫—É—Ä—Å–∏–≤ </em>
    # <b> –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç </b>


HELP_COMMAND = """
<b>/help</b> - <em>—Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥</em>
<b>/start</b> - <em>–Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º</em>
<b>/give</b> - <em>–ø–æ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å—Ç–∏–∫–µ—Ä –≤ —á–∞—Ç, —É–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</em>
"""
```

#### –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç ID —Å—Ç–∏–∫–µ—Ä–∞ –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

```python
@dp.message_handler(content_types=['sticker'])  # —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ - —Å—Ç–∏–∫–µ—Ä
async def get_sticker_id(message: types.Message):
    await message.answer(f"ID —ç—Ç–æ–≥–æ —Å—Ç–∏–∫–µ—Ä–∞: {message.sticker.file_id}")  # –ø–æ—Å—ã–ª–∞–µ–º id —Å—Ç–∏–∫–µ—Ä–∞
```

#### –ü–æ –∫–æ–º–∞–Ω–¥–µ /give –ø–æ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å—Ç–∏–∫–µ—Ä –≤ —á–∞—Ç, —É–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```python
@dp.message_handler(commands=['give'])
async def give_command(message: types.Message):
    await bot.send_message(message.from_user.id, text="–°–º–æ—Ç—Ä–∏ –∫–∞–∫–æ–π —Å–º–µ—à–Ω–æ–π –∫–æ—Ç ‚ù§Ô∏è")
    await bot.send_sticker(message.from_user.id,
                           sticker="CAACAgIAAxkBAAEH305j97F6tGFBLsiXYpArYZ88f6d8wAACUwADrWW8FKPXOfaLMFQULgQ")
    # sticker_id –±–µ—Ä–µ–º —É –±–æ—Ç–∞ "get sticker id" (@idstickerbot)
    await message.delete()
```
